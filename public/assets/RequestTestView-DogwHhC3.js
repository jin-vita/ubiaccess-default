import{d as B,r as p,c as x,_ as G,s as E,g as A,a as r,b as l,t as i,u as F,F as L,e as R,w as T,f as C,j as k,v as $,i as V,o as d,n as J}from"./index-CznVhEh6.js";import{r as h,b as N}from"./index-Dv1oZ6ws.js";const z=B("people",()=>{const c=p([]),m=x(()=>c.value.length);async function b(P){const s="/student/list";try{const u=await h(s,P);return console.log(`response -> ${JSON.stringify(u)}`),c.value=u.data.output.body,u.data}catch(u){return u.code==="ECONNABORTED"?console.log(`서버 요청 시 타임아웃 : ${requestConfig.timeout}`):console.error(`서버 요청 시 에러 : ${u.message}`),null}}return{people:c,peopleCount:m,requestPersonListGlobal:b}}),D=["onClick"],H=["src"],K={class:"pagination"},Q=["disabled"],W=["disabled"],X=["onClick"],Y=["disabled"],Z=["disabled"],U=6,_={__name:"RequestTestView",setup(c){const m=z(),{people:b,peopleCount:P}=E(m),s=p(1),u=x(()=>{const o=(s.value-1)*U;return b.value.slice(o,o+U)}),g=x(()=>Math.ceil(b.value.length/U)),q=p(!1),a=p(null),n=p({name:"",age:"",mobile:"",profile:""});function I(o=null){q.value=!0,a.value=o,n.value=o?{...o}:{name:"",age:"",mobile:"",profile:""}}function w(){q.value=!1,a.value=null}function M(){if(!Number.isInteger(Number(n.value.age))||Number(n.value.age)<1){alert(`나이의 값이 올바르지 않습니다. age: ${n.value.age}`);return}a.value?O(n.value):S(n.value),w()}A(()=>{console.log("onMounted 호출됨."),f()});function f(){console.log("requestPersonListGlobal 호출됨.");try{const o={requestCode:"1001",order:"id",orderDirection:"desc"};m.requestPersonListGlobal(o)}catch(o){console.error(`웹서버 요청 중 에러 발생 : ${o}`)}}const y=p("");async function S(o){console.log(`requestPersonCreate 호출됨 -> formData : ${JSON.stringify(o)}`);const e={name:o.name,age:o.age,mobile:o.mobile,profile:o.profile};try{const t=await N({method:"post",baseURL:"http://localhost:8001",url:"/student/insert",data:e,responseType:"json"});console.log(t.data),s.value=1,f()}catch(t){y.value=`에러 -> ${t}`}}async function O(o){console.log(`requestPersonUpdate 호출됨 -> selected : ${a.value.name}`);const t={id:a.value.id,name:o.name,age:o.age,mobile:o.mobile,profile:o.profile};try{const v=await N({method:"post",baseURL:"http://localhost:8001",url:"/student/update",data:t,responseType:"json"});console.log(v.data),f()}catch(v){y.value=`에러 -> ${v}`}}async function j(){console.log(`requestPersonDelete 호출됨 -> selected : ${a.value.name}`);const e={id:a.value.id};try{const t=await N({method:"post",baseURL:"http://localhost:8001",url:"/student/delete",data:e,responseType:"json"});console.log(t.data),await f()}catch(t){y.value=`에러 -> ${t}`}}return(o,e)=>(d(),r("div",null,[e[15]||(e[15]=l("h1",null,"아이템 리스트",-1)),l("button",{onClick:e[0]||(e[0]=t=>I())},"아이템 추가"),l("div",null,[l("p",null,i(y.value),1)]),l("div",null,[l("p",null,"총 "+i(F(P))+" 개",1)]),(d(!0),r(L,null,R(u.value,t=>(d(),r("div",{key:t.id,class:"item",onClick:v=>I(t)},[l("img",{src:t.profile!==""?t.profile:"https://via.placeholder.com/50",alt:"프로필",class:"profile-pic"},null,8,H),l("p",null,i(t.name)+" * "+i(t.age)+" * ",1),l("p",null,i(t.mobile),1)],8,D))),128)),l("div",K,[l("button",{onClick:e[1]||(e[1]=t=>s.value=1),disabled:s.value===1}," « ",8,Q),l("button",{onClick:e[2]||(e[2]=t=>s.value--),disabled:s.value===1}," ‹ ",8,W),(d(!0),r(L,null,R(g.value,t=>(d(),r("button",{key:t,class:J({active:s.value===t}),onClick:v=>s.value=t},i(t),11,X))),128)),l("button",{onClick:e[3]||(e[3]=t=>s.value++),disabled:s.value===g.value}," › ",8,Y),l("button",{onClick:e[4]||(e[4]=t=>s.value=g.value),disabled:s.value===g.value}," » ",8,Z)]),q.value?(d(),r("div",{key:0,class:"modal-overlay",onClick:w},[l("div",{class:"modal-content",onClick:e[9]||(e[9]=T(()=>{},["stop"]))},[l("h2",null,i(a.value?"아이템 수정":"아이템 추가"),1),l("form",{onSubmit:T(M,["prevent"])},[l("label",null,[e[10]||(e[10]=C(" 프로필사진: ")),k(l("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>n.value.profile=t),placeholder:"이미지 URL"},null,512),[[$,n.value.profile]])]),l("label",null,[e[11]||(e[11]=C(" 이름: ")),k(l("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>n.value.name=t)},null,512),[[$,n.value.name]])]),l("label",null,[e[12]||(e[12]=C(" 나이: ")),k(l("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=t=>n.value.age=t)},null,512),[[$,n.value.age]])]),l("label",null,[e[13]||(e[13]=C(" 전화번호: ")),k(l("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>n.value.mobile=t)},null,512),[[$,n.value.mobile]])]),e[14]||(e[14]=l("button",{type:"submit"},"저장",-1)),l("button",{type:"button",onClick:w},"취소"),a.value?(d(),r("button",{key:0,onClick:j},"삭제")):V("",!0)],32)])])):V("",!0)]))}},le=G(_,[["__scopeId","data-v-0915d1f8"]]);export{le as default};
