import{d as j,r as p,c as x,_ as B,s as G,g as h,a as r,b as t,t as i,u as E,F as L,e as R,f as C,w as k,v as $,i as T,j as A,o as d,n as F}from"./index-C0ucnu1o.js";import{r as J,b as N}from"./index-Dv1oZ6ws.js";const z=j("people",()=>{const c=p([]),m=x(()=>c.value.length);async function b(P){const s="/student/list";try{const u=await J(s,P);return console.log(`response -> ${JSON.stringify(u)}`),c.value=u.data.output.body,u.data}catch(u){return u.code==="ECONNABORTED"?console.log(`서버 요청 시 타임아웃 : ${requestConfig.timeout}`):console.error(`서버 요청 시 에러 : ${u.message}`),null}}return{people:c,peopleCount:m,requestPersonListGlobal:b}}),D=["onClick"],H=["src"],K={class:"pagination"},Q=["disabled"],W=["disabled"],X=["onClick"],Y=["disabled"],Z=["disabled"],U=6,_={__name:"RequestTestView",setup(c){const m=z(),{people:b,peopleCount:P}=G(m),s=p(1),u=x(()=>{const o=(s.value-1)*U;return b.value.slice(o,o+U)}),g=x(()=>Math.ceil(b.value.length/U)),q=p(!1),a=p(null),n=p({name:"",age:"",mobile:"",profile:""});function I(o=null){q.value=!0,a.value=o,n.value=o?{...o}:{name:"",age:"",mobile:"",profile:""}}function w(){q.value=!1,a.value=null}function V(){if(!Number.isInteger(Number(n.value.age))||Number(n.value.age)<1){alert(`나이의 값이 올바르지 않습니다. age: ${n.value.age}`);return}a.value?S(n.value):M(n.value),w()}h(()=>{console.log("onMounted 호출됨."),f()});function f(){console.log("requestPersonListGlobal 호출됨.");try{const o={requestCode:"1001",order:"id",orderDirection:"desc"};m.requestPersonListGlobal(o)}catch(o){console.error(`웹서버 요청 중 에러 발생 : ${o}`)}}const y=p("");async function M(o){console.log(`requestPersonCreate 호출됨 -> formData : ${JSON.stringify(o)}`);const e={name:o.name,age:o.age,mobile:o.mobile,profile:o.profile};try{const l=await N({method:"post",baseURL:"http://localhost:8001",url:"/student/insert",data:e,responseType:"json"});console.log(l.data),s.value=1,f()}catch(l){y.value=`에러 -> ${l}`}}async function S(o){console.log(`requestPersonUpdate 호출됨 -> selected : ${a.value.name}`);const l={id:a.value.id,name:o.name,age:o.age,mobile:o.mobile,profile:o.profile};try{const v=await N({method:"post",baseURL:"http://localhost:8001",url:"/student/update",data:l,responseType:"json"});console.log(v.data),f()}catch(v){y.value=`에러 -> ${v}`}}async function O(){console.log(`requestPersonDelete 호출됨 -> selected : ${a.value.name}`);const e={id:a.value.id};try{const l=await N({method:"post",baseURL:"http://localhost:8001",url:"/student/delete",data:e,responseType:"json"});console.log(l.data),await f()}catch(l){y.value=`에러 -> ${l}`}}return(o,e)=>(d(),r("div",null,[e[14]||(e[14]=t("h1",null,"아이템 리스트",-1)),t("button",{onClick:e[0]||(e[0]=l=>I())},"아이템 추가"),t("div",null,[t("p",null,i(y.value),1)]),t("div",null,[t("p",null,"총 "+i(E(P))+" 개",1)]),(d(!0),r(L,null,R(u.value,l=>(d(),r("div",{key:l.id,class:"item",onClick:v=>I(l)},[t("img",{src:l.profile!==""?l.profile:"https://via.placeholder.com/50",alt:"프로필",class:"profile-pic"},null,8,H),t("p",null,i(l.name)+" * "+i(l.age)+" * ",1),t("p",null,i(l.mobile),1)],8,D))),128)),t("div",K,[t("button",{onClick:e[1]||(e[1]=l=>s.value=1),disabled:s.value===1}," « ",8,Q),t("button",{onClick:e[2]||(e[2]=l=>s.value--),disabled:s.value===1}," ‹ ",8,W),(d(!0),r(L,null,R(g.value,l=>(d(),r("button",{key:l,class:F({active:s.value===l}),onClick:v=>s.value=l},i(l),11,X))),128)),t("button",{onClick:e[3]||(e[3]=l=>s.value++),disabled:s.value>=g.value}," › ",8,Y),t("button",{onClick:e[4]||(e[4]=l=>s.value=g.value),disabled:s.value>=g.value}," » ",8,Z)]),q.value?(d(),r("div",{key:0,class:"modal-overlay",onClick:w},[t("div",{class:"modal-content",onClick:e[9]||(e[9]=A(()=>{},["stop"]))},[t("h2",null,i(a.value?"아이템 수정":"아이템 추가"),1),t("form",null,[t("label",null,[e[10]||(e[10]=C(" 사진 : ")),k(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>n.value.profile=l),placeholder:"이미지 URL"},null,512),[[$,n.value.profile]])]),t("label",null,[e[11]||(e[11]=C(" 이름 : ")),k(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>n.value.name=l)},null,512),[[$,n.value.name]])]),t("label",null,[e[12]||(e[12]=C(" 나이 : ")),k(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=l=>n.value.age=l)},null,512),[[$,n.value.age]])]),t("label",null,[e[13]||(e[13]=C(" 번호 : ")),k(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>n.value.mobile=l)},null,512),[[$,n.value.mobile]])]),t("button",{onClick:V},"저장"),t("button",{onClick:w},"취소"),a.value?(d(),r("button",{key:0,onClick:O},"삭제")):T("",!0)])])])):T("",!0)]))}},te=B(_,[["__scopeId","data-v-fc101da5"]]);export{te as default};
